% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/audit-chapter.R
\name{audit_chapter}
\alias{audit_chapter}
\title{Audit the script-figure-slide dependency chain for a chapter}
\usage{
audit_chapter(lecture, chapter, pattern = "[.]R$", timeout = 300, run = TRUE)
}
\arguments{
\item{lecture}{Character. Lecture directory name, e.g. \code{"lecture_i2ml"}.}

\item{chapter}{Character. Chapter directory name, e.g. \code{"evaluation"}.}

\item{pattern}{Regex pattern to filter scripts. Default \code{"[.]R$"}.}

\item{timeout}{Numeric. Per-script timeout in seconds. Default 300.}

\item{run}{Logical. If \code{TRUE} (default), execute scripts.
If \code{FALSE}, only perform static analysis (figure existence + slide references).}
}
\value{
Invisibly: A list with components:
\itemize{
\item \code{scripts}: data.frame of scripts. Includes \code{success}, \code{error_message},
\code{elapsed}, and \code{figures_produced} columns when \code{run = TRUE} (\code{NA} otherwise).
\item \code{figures}: data.frame of figure files on disk
\item \code{slide_refs}: named list mapping slide filenames to their figure references
\item \code{orphaned_figures}: character vector of figure basenames not used by any slide
\item \code{orphaned_scripts}: character vector of script filenames whose produced
figures are not used by any slide (\code{NULL} if \code{run = FALSE})
\item \code{missing_figures}: data.frame with columns \code{figure} and \code{slide} for
figures referenced by slides but not on disk
\item \code{missing_pkgs}: character vector of R packages required by scripts
but not currently installed
}
}
\description{
Performs a comprehensive audit of a lecture chapter:
\enumerate{
\item Discovers scripts in \verb{rsrc/}, figures in \verb{figure/}, and slide \code{.tex} files
\item Parses slides to find which figures they reference
\item Optionally runs all scripts and tracks which figures they produce
\item Cross-references to identify orphaned figures, orphaned scripts,
and missing figures
}
}
\examples{
\dontshow{if (fs::dir_exists(here::here("lecture_i2ml"))) withAutoprint(\{ # examplesIf}
# Static audit only (no script execution)
result <- audit_chapter("lecture_i2ml", "evaluation", run = FALSE)
result$orphaned_figures
result$missing_figures

\dontrun{
# Full audit with script execution
result <- audit_chapter("lecture_i2ml", "evaluation", run = TRUE)
}
\dontshow{\}) # examplesIf}
}
